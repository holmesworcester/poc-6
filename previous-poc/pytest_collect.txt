============================= test session starts ==============================
platform linux -- Python 3.11.2, pytest-8.4.2, pluggy-1.6.0
rootdir: /home/hwilson/quiet-python-poc-5
configfile: pytest.ini
testpaths: protocols/quiet/tests, test_network_simulator.py, test_user_creation.py
collected 192 items / 1 error

<Dir quiet-python-poc-5>
  <Package protocols>
    <Package quiet>
      <Dir tests>
        <Dir events>
          <Package channel>
            <Module test_projector.py>
              <Class TestChannelProjector>
                <Function test_project_channel_creates_deltas>
                <Function test_project_channel_no_description>
                <Function test_project_channel_preserves_all_fields>
                <Function test_project_channel_delta_structure>
                <Function test_project_multiple_channels>
            <Module test_query.py>
              <Class TestChannelQuery>
                <Function test_list_all_channels>
                <Function test_get_channels_by_group>
                <Function test_get_channels_by_network>
                <Function test_get_channels_by_group_and_network>
                <Function test_get_channels_empty_result>
                <Function test_get_channels_nonexistent_filters>
                <Function test_get_channels_returns_all_fields>
            <Module test_validator.py>
              <Class TestChannelValidator>
                <Function test_valid_channel_event>
                <Function test_channel_missing_required_fields>
                <Function test_channel_wrong_type>
                <Function test_channel_creator_mismatch>
                <Function test_channel_empty_name>
                <Function test_channel_missing_peer_id>
                <Function test_channel_extra_fields>
          <Package group>
            <Module test_projector.py>
              <Class TestGroupProjector>
                <Function test_project_group_creates_deltas>
                <Function test_project_group_no_permissions>
                <Function test_project_group_creator_is_owner>
                <Function test_project_group_membership_auto_added>
                <Function test_project_group_permissions_serialized>
                <Function test_project_group_delta_structure>
                <Function test_project_multiple_groups>
                <Function test_project_group_preserves_timestamps>
            <Module test_query.py>
              <Class TestGroupQuery>
                <Function test_list_all_groups>
                <Function test_list_groups_by_network>
                <Function test_list_groups_by_owner>
                <Function test_list_groups_combined_filters>
                <Function test_list_groups_includes_member_count>
                <Function test_list_groups_empty_result>
                <Function test_list_groups_ordering>
            <Module test_validator.py>
              <Class TestGroupValidator>
                <Function test_valid_group_event>
                <Function test_group_missing_required_fields>
                <Function test_group_wrong_type>
                <Function test_group_creator_mismatch>
                <Function test_group_missing_peer_id>
                <Function test_group_extra_fields>
          <Package key>
            <Module test_validator.py>
              <Class TestKeyValidator>
                <Function test_valid_key_event>
                <Function test_missing_type>
                <Function test_wrong_type>
                <Function test_missing_key_id>
                <Function test_missing_group_id>
                <Function test_missing_sealed_key>
                <Function test_missing_peer_id>
                <Function test_missing_signature>
                <Function test_invalid_signature>
                <Function test_tampered_event>
                <Function test_different_signer>
          <Package message>
            <Module test_projector.py>
              <Class TestMessageProjector>
                <Function test_project_message_creates_deltas>
                <Function test_project_message_peer_id_to_author_id>
                <Function test_project_message_empty_content>
                <Function test_project_message_special_characters>
                <Function test_project_message_delta_structure>
                <Function test_project_message_invalid_envelope>
                <Function test_project_multiple_messages>
                <Function test_project_message_preserves_timestamps>
                <Function test_project_message_no_extra_fields>
            <Module test_query.py>
              <Class TestMessageQuery>
                <Function test_list_all_messages>
                <Function test_list_messages_by_channel>
                <Function test_list_messages_by_group>
                <Function test_list_messages_with_limit>
                <Function test_list_messages_with_offset>
                <Function test_list_messages_channel_with_limit>
                <Function test_list_messages_default_limit>
                <Function test_list_messages_empty_result>
                <Function test_list_messages_nonexistent_filters>
                <Function test_list_messages_returns_all_fields>
                <Function test_list_messages_chronological_order>
                <Function test_list_messages_large_offset>
            <Module test_validator.py>
              <Class TestMessageValidator>
                <Function test_valid_message_event>
                <Function test_message_missing_event_plaintext>
                <Function test_message_missing_peer_id>
                <Function test_message_peer_id_mismatch>
                <Function test_message_empty_content>
                <Function test_message_content_too_long>
                <Function test_message_with_special_characters>
                <Function test_message_single_character>
                <Function test_message_missing_required_fields>
                <Function test_message_extra_fields>
                <Function test_message_numeric_content>
                <Function test_message_content_with_leading_whitespace>
          <Package transit_secret>
            <Module test_projector.py>
              <Class TestTransitSecretProjector>
                <Function test_project_transit_secret_creates_deltas>
                <Function test_project_transit_secret_delta_structure>
                <Function test_project_transit_secret_no_secret_in_delta>
                <Function test_project_transit_secret_required_fields>
            <Module test_validator.py>
              <Class TestTransitSecretValidator>
                <Function test_valid_transit_secret_event>
                <Function test_missing_type>
                <Function test_wrong_type>
                <Function test_missing_transit_secret_id>
                <Function test_missing_network_id>
                <Function test_missing_peer_id>
                <Function test_missing_signature>
                <Function test_invalid_signature>
                <Function test_tampered_event>
                <Function test_no_secret_in_event>
          <Package user>
            <Module test_projector.py>
              <Class TestUserProjector>
                <Function test_project_user_creates_deltas>
                <Function test_project_user_without_invite>
                <Function test_project_user_timestamps>
                <Function test_project_user_delta_structure>
                <Function test_project_multiple_users>
                <Function test_project_user_with_added_by>
                <Function test_project_user_no_extra_fields>
            <Module test_query.py>
              <Class TestUserQuery>
                <Function test_get_users>
                <Function test_get_users_different_network>
                <Function test_get_users_requires_identity>
                <Function test_get_users_requires_network>
                <Function test_get_user_by_id>
                <Function test_get_user_not_found>
                <Function test_get_user_by_peer_id>
                <Function test_get_user_by_peer_id_not_found>
                <Function test_get_user_by_peer_id_wrong_network>
                <Function test_count_users>
                <Function test_is_user_in_network>
                <Function test_get_users_with_limit>
                <Function test_get_users_with_offset>
                <Function test_get_users_ordered_by_joined_at>
            <Module test_validator.py>
              <Class TestUserValidator>
                <Function test_valid_user_event>
                <Function test_valid_invite_user_event>
                <Function test_user_missing_required_fields>
                <Function test_user_wrong_type>
                <Function test_user_peer_id_mismatch>
                <Function test_user_empty_network_id>
                <Function test_user_empty_name>
                <Function test_invite_fields_must_both_exist>
                <Function test_invite_requires_group_id>
                <Function test_user_missing_peer_id>
                <Function test_user_extra_fields>
        <Dir handlers>
          <Module test_check_sig.py>
            <Class TestCheckSigHandler>
              <Function test_filter_no_sig_checked>
              <Function test_filter_already_checked>
              <Function test_filter_requires_deps_valid>
              <Function test_process_valid_signature>
              <Function test_process_invalid_signature>
              <Function test_process_tampered_event>
              <Function test_process_missing_signature>
              <Function test_process_different_signer>
          <Module test_event_store.py>
            <Class TestEventStoreHandler>
              <Function test_filter_accepts_write_flag>
              <Function test_filter_rejects_no_write_flag>
              <Function test_handler_stores_event>
              <Function test_handler_stores_key_event>
              <Function test_handler_requires_event_id>
              <Function test_handler_deduplicates>
              <Function test_purge_is_noop>
              <Function test_purge_event_handles_missing>
          <Module test_minimal_pipeline.py>
            <Function test_minimal_pipeline>
          <Module test_project.py>
            <Class TestProjectHandler>
              <Function test_filter_requires_validated>
              <Function test_filter_skips_projected>
              <Function test_process_message_event>
              <Function test_process_key_event>
              <Function test_process_transit_secret_event>
              <Function test_process_unknown_event_type>
              <Function test_process_preserves_envelope>
          <Module test_receive_from_network.py>
            <Class TestReceiveFromNetworkHandler>
              <Function test_filter_accepts_network_data>
              <Function test_filter_rejects_already_processed>
              <Function test_filter_rejects_missing_fields>
              <Function test_process_extracts_transit_info>
              <Function test_process_handles_short_data>
              <Function test_process_preserves_metadata>
          <Module test_remove.py>
            <Class TestRemoveHandler>
              <Function test_filter_skips_already_marked_keep>
              <Function test_filter_accepts_event_id_only>
              <Function test_filter_accepts_content_check>
              <Function test_filter_accepts_both_phases>
              <Function test_handler_removes_explicitly_deleted>
              <Function test_handler_keeps_non_deleted>
              <Function test_handler_type_specific_removal>
              <Function test_is_explicitly_deleted>
              <Function test_get_removal_context>
              <Function test_get_remover_caching>
              <Function test_handler_handles_remover_errors>
          <Module test_unblock_deps.py>
            <Class TestUnblockDepsHandler>
              <Function test_filter_accepts_validated>
              <Function test_filter_accepts_missing_deps>
              <Function test_filter_rejects_others>
              <Function test_handler_blocks_missing_deps>
              <Function test_handler_unblocks_when_deps_satisfied>
              <Function test_handler_only_unblocks_all_satisfied>
              <Function test_handler_extracts_event_id_from_deps>
          <Module test_unblock_pipeline.py>
            <Class TestUnblockIntoValidate>
              <Function test_unblock_then_signature_then_validate>
          <Module test_validate.py>
            <Class TestValidateHandler>
              <Function test_filter_requires_sig_checked>
              <Function test_filter_skips_validated>
              <Function test_filter_requires_event_plaintext>
              <Function test_process_valid_message>
              <Function test_process_invalid_message>
              <Function test_process_unknown_event_type>
              <Function test_process_preserves_envelope_data>
              <Function test_user_peer_match_validates>
              <Function test_user_peer_mismatch_fails>
        <Package scenarios>
          <Module test_kem_dem_roundtrip.py>
            <Function test_kem_dem_roundtrip_api_only>
          <Module test_multi_identity_chat_sim.py>
            <Function test_multi_identity_chat_via_simulator_single_api>
          <Module test_overlapping_networks_sim.py>
            <Function test_overlapping_networks_api_only>
          <Module test_simulator_transit_roundtrip.py>
            <Function test_transit_roundtrip_with_simulator_api>

==================================== ERRORS ====================================
_____ ERROR collecting protocols/quiet/tests/handlers/test_resolve_deps.py _____
ImportError while importing test module '/home/hwilson/quiet-python-poc-5/protocols/quiet/tests/handlers/test_resolve_deps.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/lib/python3.11/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
protocols/quiet/tests/handlers/test_resolve_deps.py:14: in <module>
    from protocols.quiet.handlers.resolve_deps import filter_func, handler as resolve_handler, parse_dep_ref
E   ImportError: cannot import name 'parse_dep_ref' from 'protocols.quiet.handlers.resolve_deps' (/home/hwilson/quiet-python-poc-5/protocols/quiet/handlers/resolve_deps.py)
=========================== short test summary info ============================
ERROR protocols/quiet/tests/handlers/test_resolve_deps.py
!!!!!!!!!!!!!!!!!!!! Interrupted: 1 error during collection !!!!!!!!!!!!!!!!!!!!
==================== 192 tests collected, 1 error in 0.15s =====================
